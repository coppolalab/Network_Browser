(function(e){"use strict";var t={},n=Math.max,r=Math.min;t.c={};t.c.d=e(document);t.c.t=function(e){return e.originalEvent.touches.length-1};t.o=function(){var n=this;this.o=null;this.$=null;this.i=null;this.g=null;this.v=null;this.cv=null;this.x=0;this.y=0;this.w=0;this.h=0;this.$c=null;this.c=null;this.t=0;this.isInit=false;this.fgColor=null;this.pColor=null;this.dH=null;this.cH=null;this.eH=null;this.rH=null;this.scale=1;this.relative=false;this.relativeWidth=false;this.relativeHeight=false;this.$div=null;this.run=function(){var t=function(e,t){var r;for(r in t){n.o[r]=t[r]}n.init();n._configure()._draw()};if(this.$.data("kontroled"))return;this.$.data("kontroled",true);this.extend();this.o=e.extend({min:this.$.data("min")||0,max:this.$.data("max")||100,stopper:true,readOnly:this.$.data("readonly"),cursor:this.$.data("cursor")===true&&30||this.$.data("cursor")||0,thickness:this.$.data("thickness")||.35,lineCap:this.$.data("linecap")||"butt",width:this.$.data("width")||200,height:this.$.data("height")||200,displayInput:this.$.data("displayinput")==null||this.$.data("displayinput"),displayPrevious:this.$.data("displayprevious"),fgColor:this.$.data("fgcolor")||"#87CEEB",inputColor:this.$.data("inputcolor")||this.$.data("fgcolor")||"#87CEEB",font:this.$.data("font")||"Arial",fontWeight:this.$.data("font-weight")||"bold",inline:false,step:this.$.data("step")||1,draw:null,change:null,cancel:null,release:null,error:null},this.o);if(this.$.is("fieldset")){this.v={};this.i=this.$.find("input");this.i.each(function(t){var r=e(this);n.i[t]=r;n.v[t]=r.val();r.bind("change",function(){var e={};e[t]=r.val();n.val(e)})});this.$.find("legend").remove()}else{this.i=this.$;this.v=this.$.val();this.v==""&&(this.v=this.o.min);this.$.bind("change",function(){n.val(n._validate(n.$.val()))})}!this.o.displayInput&&this.$.hide();this.$c=e(document.createElement("canvas"));if(typeof G_vmlCanvasManager!=="undefined"){G_vmlCanvasManager.initElement(this.$c[0])}this.c=this.$c[0].getContext?this.$c[0].getContext("2d"):null;if(!this.c){this.o.error&&this.o.error();return}this.scale=(window.devicePixelRatio||1)/(this.c.webkitBackingStorePixelRatio||this.c.mozBackingStorePixelRatio||this.c.msBackingStorePixelRatio||this.c.oBackingStorePixelRatio||this.c.backingStorePixelRatio||1);this.relativeWidth=this.o.width%1!==0&&this.o.width.indexOf("%");this.relativeHeight=this.o.height%1!==0&&this.o.height.indexOf("%");this.relative=this.relativeWidth||this.relativeHeight;this.$div=e('<div style="'+(this.o.inline?"display:inline;":"")+'"></div>');this.$.wrap(this.$div).before(this.$c);this.$div=this.$.parent();this._carve();if(this.v instanceof Object){this.cv={};this.copy(this.v,this.cv)}else{this.cv=this.v}this.$.bind("configure",t).parent().bind("configure",t);this._listen()._configure()._xy().init();this.isInit=true;this._draw();return this};this._carve=function(){if(this.relative){var e=this.relativeWidth?this.$div.parent().width()*parseInt(this.o.width)/100:this.$div.parent().width(),t=this.relativeHeight?this.$div.parent().height()*parseInt(this.o.height)/100:this.$div.parent().height();this.w=this.h=Math.min(e,t)}else{this.w=this.o.width;this.h=this.o.height}this.$div.css({width:this.w+"px",height:this.h+"px"});this.$c.attr({width:this.w,height:this.h});if(this.scale!==1){this.$c[0].width=this.$c[0].width*this.scale;this.$c[0].height=this.$c[0].height*this.scale;this.$c.width(this.w);this.$c.height(this.h)}return this};this._draw=function(){var e=true;n.g=n.c;n.clear();n.dH&&(e=n.dH());e!==false&&n.draw()};this._touch=function(e){var r=function(e){var t=n.xy2val(e.originalEvent.touches[n.t].pageX,e.originalEvent.touches[n.t].pageY);if(t==n.cv)return;if(n.cH&&n.cH(t)===false)return;n.change(n._validate(t));n._draw()};this.t=t.c.t(e);r(e);t.c.d.bind("touchmove.k",r).bind("touchend.k",function(){t.c.d.unbind("touchmove.k touchend.k");if(n.rH&&n.rH(n.cv)===false)return;n.val(n.cv)});return this};this._mouse=function(e){var r=function(e){var t=n.xy2val(e.pageX,e.pageY);if(t==n.cv)return;if(n.cH&&n.cH(t)===false)return;n.change(n._validate(t));n._draw()};r(e);t.c.d.bind("mousemove.k",r).bind("keyup.k",function(e){if(e.keyCode===27){t.c.d.unbind("mouseup.k mousemove.k keyup.k");if(n.eH&&n.eH()===false)return;n.cancel()}}).bind("mouseup.k",function(e){t.c.d.unbind("mousemove.k mouseup.k keyup.k");if(n.rH&&n.rH(n.cv)===false)return;n.val(n.cv)});return this};this._xy=function(){var e=this.$c.offset();this.x=e.left;this.y=e.top;return this};this._listen=function(){if(!this.o.readOnly){this.$c.bind("mousedown",function(e){e.preventDefault();n._xy()._mouse(e)}).bind("touchstart",function(e){e.preventDefault();n._xy()._touch(e)});if(this.relative){e(window).resize(function(){n._carve().init();n._draw()})}this.listen()}else{this.$.attr("readonly","readonly")}return this};this._configure=function(){if(this.o.draw)this.dH=this.o.draw;if(this.o.change)this.cH=this.o.change;if(this.o.cancel)this.eH=this.o.cancel;if(this.o.release)this.rH=this.o.release;if(this.o.displayPrevious){this.pColor=this.h2rgba(this.o.fgColor,"0.4");this.fgColor=this.h2rgba(this.o.fgColor,"0.6")}else{this.fgColor=this.o.fgColor}return this};this._clear=function(){this.$c[0].width=this.$c[0].width};this._validate=function(e){return~~((e<0?-.5:.5)+e/this.o.step)*this.o.step};this.listen=function(){};this.extend=function(){};this.init=function(){};this.change=function(e){};this.val=function(e){};this.xy2val=function(e,t){};this.draw=function(){};this.clear=function(){this._clear()};this.h2rgba=function(e,t){var n;e=e.substring(1,7);n=[parseInt(e.substring(0,2),16),parseInt(e.substring(2,4),16),parseInt(e.substring(4,6),16)];return"rgba("+n[0]+","+n[1]+","+n[2]+","+t+")"};this.copy=function(e,t){for(var n in e){t[n]=e[n]}}};t.Dial=function(){t.o.call(this);this.startAngle=null;this.xy=null;this.radius=null;this.lineWidth=null;this.cursorExt=null;this.w2=null;this.PI2=2*Math.PI;this.extend=function(){this.o=e.extend({bgColor:this.$.data("bgcolor")||"#EEEEEE",angleOffset:this.$.data("angleoffset")||0,angleArc:this.$.data("anglearc")||360,inline:true},this.o)};this.val=function(e){if(null!=e){this.cv=this.o.stopper?n(r(e,this.o.max),this.o.min):e;this.v=this.cv;this.$.val(this.v);this._draw()}else{return this.v}};this.xy2val=function(e,t){var i,s;i=Math.atan2(e-(this.x+this.w2),-(t-this.y-this.w2))-this.angleOffset;if(this.angleArc!=this.PI2&&i<0&&i>-.5){i=0}else if(i<0){i+=this.PI2}s=~~(.5+i*(this.o.max-this.o.min)/this.angleArc)+this.o.min;this.o.stopper&&(s=n(r(s,this.o.max),this.o.min));return s};this.listen=function(){var t=this,i=function(e){e.preventDefault();var n=e.originalEvent,r=n.detail||n.wheelDeltaX,i=n.detail||n.wheelDeltaY,s=parseInt(t.$.val())+(r>0||i>0?t.o.step:r<0||i<0?-t.o.step:0);if(t.cH&&t.cH(s)===false)return;t.val(s)},s,o,u=1,a={37:-t.o.step,38:t.o.step,39:t.o.step,40:-t.o.step};this.$.bind("keydown",function(i){var f=i.keyCode;if(f>=96&&f<=105){f=i.keyCode=f-48}s=parseInt(String.fromCharCode(f));if(isNaN(s)){f!==13&&f!==8&&f!==9&&f!==189&&i.preventDefault();if(e.inArray(f,[37,38,39,40])>-1){i.preventDefault();var l=parseInt(t.$.val())+a[f]*u;t.o.stopper&&(l=n(r(l,t.o.max),t.o.min));t.change(l);t._draw();o=window.setTimeout(function(){u*=2},30)}}}).bind("keyup",function(e){if(isNaN(s)){if(o){window.clearTimeout(o);o=null;u=1;t.val(t.$.val())}}else{t.$.val()>t.o.max&&t.$.val(t.o.max)||t.$.val()<t.o.min&&t.$.val(t.o.min)}});this.$c.bind("mousewheel DOMMouseScroll",i);this.$.bind("mousewheel DOMMouseScroll",i)};this.init=function(){if(this.v<this.o.min||this.v>this.o.max)this.v=this.o.min;this.$.val(this.v);this.w2=this.w/2;this.cursorExt=this.o.cursor/100;this.xy=this.w2*this.scale;this.lineWidth=this.xy*this.o.thickness;this.lineCap=this.o.lineCap;this.radius=this.xy-this.lineWidth/2;this.o.angleOffset&&(this.o.angleOffset=isNaN(this.o.angleOffset)?0:this.o.angleOffset);this.o.angleArc&&(this.o.angleArc=isNaN(this.o.angleArc)?this.PI2:this.o.angleArc);this.angleOffset=this.o.angleOffset*Math.PI/180;this.angleArc=this.o.angleArc*Math.PI/180;this.startAngle=1.5*Math.PI+this.angleOffset;this.endAngle=1.5*Math.PI+this.angleOffset+this.angleArc;var e=n(String(Math.abs(this.o.max)).length,String(Math.abs(this.o.min)).length,2)+2;this.o.displayInput&&this.i.css({width:(this.w/2+4>>0)+"px",height:(this.w/3>>0)+"px",position:"absolute","vertical-align":"middle","margin-top":(this.w/3>>0)+"px","margin-left":"-"+(this.w*3/4+2>>0)+"px",border:0,background:"none",font:this.o.fontWeight+" "+(this.w/e>>0)+"px "+this.o.font,"text-align":"center",color:this.o.inputColor||this.o.fgColor,padding:"0px","-webkit-appearance":"none"})||this.i.css({width:"0px",visibility:"hidden"})};this.change=function(e){this.cv=e;this.$.val(e)};this.angle=function(e){return(e-this.o.min)*this.angleArc/(this.o.max-this.o.min)};this.draw=function(){var e=this.g,t=this.angle(this.cv),n=this.startAngle,r=n+t,i,s,o=1;e.lineWidth=this.lineWidth;e.lineCap=this.lineCap;this.o.cursor&&(n=r-this.cursorExt)&&(r=r+this.cursorExt);e.beginPath();e.strokeStyle=this.o.bgColor;e.arc(this.xy,this.xy,this.radius,this.endAngle,this.startAngle,true);e.stroke();if(this.o.displayPrevious){s=this.startAngle+this.angle(this.v);i=this.startAngle;this.o.cursor&&(i=s-this.cursorExt)&&(s=s+this.cursorExt);e.beginPath();e.strokeStyle=this.pColor;e.arc(this.xy,this.xy,this.radius,i,s,false);e.stroke();o=this.cv==this.v}e.beginPath();e.strokeStyle=o?this.o.fgColor:this.fgColor;e.arc(this.xy,this.xy,this.radius,n,r,false);e.stroke()};this.cancel=function(){this.val(this.v)}};e.fn.dial=e.fn.knob=function(n){return this.each(function(){var r=new t.Dial;r.o=n;r.$=e(this);r.run()}).parent()}})(jQuery)

function getPlotDataPath(){return path+"getNetworkPlotData"}function initGraph(){modelvis=d3.select("#modelChart").append("svg:svg").attr("width",w).attr("height",h).attr("pointer-events","all").append("svg:g").call(d3.behavior.zoom().on("zoom",zoomHandler)).append("svg:g")}function initd3(){document.getElementById("geneChart").innerHTML="";vis=d3.select("#geneChart").append("svg:svg").attr("width",w).attr("height",h).attr("pointer-events","all").append("svg:g").call(d3.behavior.zoom().on("zoom",zoomHandler)).append("svg:g");vis.append("svg:rect").attr("width",w).attr("height",h).attr("fill","none")}function zoomHandler(){vis.attr("transform","translate("+d3.event.translate+")"+" scale("+d3.event.scale*1.2+")")}function initProjectId(){var e=window.location.search.split("=");projectId=e[1]}function initWindowSize(){w=$(window).width()-20;h=$(window).height()-40}function initKnob(){$(".dial").knob({fgColor:"#56E0F0",min:1,max:500,angleArc:250,angleOffset:-125,width:250,release:function(e){knobSymbolRedraw(e)}})}function initModelGraph(){document.getElementById("modelChart").style.display="block";document.getElementById("geneChart").style.display="none";var e=getPlotDataPath()+"?num=9999;model=symbol;symbol=module;id="+projectId;d3.json(e,function(e){function s(e,t){return i[e.index+","+t.index]||i[t.index+","+e.index]||e.index==t.index}function u(e,t){return function(i){r.style("stroke-opacity",function(t){thisOpacity=s(i,t)?1:e;this.setAttribute("fill-opacity",thisOpacity);return thisOpacity});o=i.name;n.style("stroke-opacity",function(r){if(t){n.attr("class","linkHighLight")}else{n.attr("class","link")}if(r.source===i||r.target===i){return 1}else{return e}});n.style("stroke",function(e){return"#aaa"})}}var t=self.force=d3.layout.force().nodes(e.nodes).links(e.links).distance(300).linkStrength(.05).charge(-300).size([w,h]).start();var n=modelvis.selectAll("line.link").data(e.links).enter().append("svg:line").attr("class","link").attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}).style("stroke",function(e){return"#ccc"});var r=modelvis.selectAll("g.node").data(e.nodes).enter().append("svg:g").attr("class","node").call(t.drag);r.append("svg:circle").attr("r",function(e){return 15}).style("fill",function(e){return"#56E0F0"});r.append("svg:text").attr("class","nodetext").attr("dx",12).attr("dy",".35em").text(function(e){return e.name});r.on("mouseover",u(.05,true));r.on("mouseout",function(){u(0,false)});r.on("click",function(e,t){var n=e.name;selectedSymbolName=n;selectedColor=getColorByName(n);$("#modelname").html(selectedSymbolName);document.getElementById("modelChart").style.display="none";document.getElementById("geneChart").style.display="block";initd3();var r=100;var i=getPlotDataPath()+"?num="+r+";model=symbol;symbol="+n+";id="+projectId;initGneGraph(i);$("#infoContainer").toggle("slide",200)});n.on("click",function(e,t){var r=matchLink(connectedLinks,e);if(r){n.style("stroke-opacity",function(t){if(t===e){n.attr("class","link");return 1}else{n.attr("class","linkHighLightSingle");return 0}})}});n.on("contextmenu",function(e,t){});var i={};e.links.forEach(function(e){i[e.source.index+","+e.target.index]=1});var o="";r.on("contextmenu",function(e,t){});r.on("dblclick",function(e){e.x=400;e.y=300;e.px=400;e.py=300;t.start()});t.on("tick",function(){n.attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y});r.attr("transform",function(e){return"translate("+e.x+","+e.y+")"})})})}function initGneGraph(e){d3.json(e,function(e){function s(e,t){return i[e.index+","+t.index]||i[t.index+","+e.index]||e.index==t.index}function f(e,t){return function(i){r.style("stroke-opacity",function(t){thisOpacity=s(i,t)?1:e;this.setAttribute("fill-opacity",thisOpacity);return thisOpacity});o=i.name;u=[];u.push(o);n.style("stroke-opacity",function(r){if(t){n.attr("class","linkHighLight")}else{n.attr("class","link")}if(r.source===i||r.target===i){if(r.source===i){u.push(r.target.name)}else{u.push(r.source.name)}a.push(r);return 1}else{return e}});u=u.getUnique();setNodeInfoList(u)}}var t=self.force=d3.layout.force().nodes(e.nodes).links(e.links).charge(-300).gravity(.05).distance(100).linkStrength(.5).size([w,h]).start();var n=vis.selectAll("line.link").data(e.links).enter().append("svg:line").attr("class","link").attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y});var r=vis.selectAll("g.node").data(e.nodes).enter().append("svg:g").attr("class","node").call(t.drag);r.append("svg:circle").attr("r",function(e){return 12}).style("fill",function(e){return"#56E0F0"});r.append("svg:text").attr("class","nodetext").attr("dx",12).attr("dy",".35em").text(function(e){return e.name});r.on("click",f(.1,true));n.on("click",function(e,t){var r=matchLink(a,e);if(r){n.style("stroke-opacity",function(t){if(t===e){n.attr("class","link");return 1}else{n.attr("class","linkHighLightSingle");return 0}})}});n.on("mouseover",function(e,t){var r=matchLink(a,e);if(r){n.style("stroke-width",function(t){if(t.source.name==e.source.name&&t.target.name==e.target.name){return"7px"}else{return"1.5px"}})}});n.on("contextmenu",function(e,t){d3.event.preventDefault();n.style("stroke-opacity",function(t){if(t===e){n.attr("class","link");var r=t.source.name;var i=t.target.name;document.getElementById("genecard_a").style.display="none";document.getElementById("brainspan_a").style.display="none";document.getElementById("cox_a").style.display="none";document.getElementById("pubmid_a").setAttribute("href","http://www.ncbi.nlm.nih.gov/pubmed?term="+"("+r+")"+"AND"+"("+i+")");document.getElementById("NGPopUp").style.top=mousePos.y+"px";document.getElementById("NGPopUp").style.left=mousePos.x+20+"px";document.getElementById("NGPopUp").style.display="block";cancelTimer();return 1}else{n.attr("class","linkHighLightSingle");return 0}})});var i={};e.links.forEach(function(e){i[e.source.index+","+e.target.index]=1});var o="";var u=[];var a=[];r.on("contextmenu",function(e,t){d3.event.preventDefault();showAllLinkField();document.getElementById("genecard_a").setAttribute("href","http://www.genecards.org/cgi-bin/carddisp.pl?gene="+e.name);document.getElementById("brainspan_a").setAttribute("href","http://www.brainspan.org/rnaseq/search?type=rnaseq&query="+e.name);document.getElementById("pubmid_a").setAttribute("href","http://www.ncbi.nlm.nih.gov/pubmed?term="+e.name);document.getElementById("cox_a").setAttribute("href","http://coxpresdb.jp/cgi-bin/inkeyword.cgi?type=any&word="+e.name);document.getElementById("NGPopUp").style.top=mousePos.y+"px";document.getElementById("NGPopUp").style.left=mousePos.x+20+"px";document.getElementById("NGPopUp").style.display="block";cancelTimer()});r.on("dblclick",function(e){e.x=400;e.y=300;e.px=400;e.py=300;t.start()});t.on("tick",function(){n.attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y});r.attr("transform",function(e){return"translate("+e.x+","+e.y+")"})})})}function cancelTimer(){if(closetimer){window.clearTimeout(closetimer);closetimer=null}}function setTimer(e){closetimer=window.setTimeout(function(){document.getElementById(e).style.display="none"},timeout)}function getColor(){var e=["#F73E88","#F74581","#F745F1","#9773FA","#7375FA","#73A7FA","#73EAFA","#4EF5CE","#45E670","#96E60E","#E6D40E","#E67A0E"];var t=e[colorIndex];colorIndex=colorIndex+1;if(colorIndex>=e.length)colorIndex=0;return t}function getColorByName(e){var t={m2:"#0000FF",m3:"#A52A2A",m4:"#00FFFF",m8:"#808080",m9:"#E0FFFF",m11:"#FF00FF",m13:"#800080",m14:"#FF0000",m15:"#FA8072",m16:"#D2B48C",m17:"#40E0D0",m18:"#FFFF00"};e=e.toLowerCase();if(t.hasOwnProperty(e)){return t[e]}else return"#cccccc"}function getSize(){var e=[4,6,8,10,12,14,16];var t=e[sizeIndex];sizeIndex=sizeIndex+1;if(sizeIndex>=e.length)sizeIndex=0;return t}function getSizeByNameSearch(e){if(sizeDatas.hasOwnProperty(selectedSymbolName)){if(typeof sizeDatas[selectedSymbolName][e]=="undefined")return 8;var t=sizeDatas[selectedSymbolName][e].s*10;var n=t%10;var r=t+Math.round(sizeDatas[selectedSymbolName][e].s*5);return r}else{return 8}}function showAllLinkField(){document.getElementById("genecard_a").style.display="block";document.getElementById("brainspan_a").style.display="block";document.getElementById("pubmid_a").style.display="block";document.getElementById("cox_a").style.display="block"}function resetModelSelection(){modelvis.selectAll("line").style("stroke-opacity",.1);modelvis.selectAll("line").style("stroke-width",1.5);modelvis.selectAll(".node").style("fill-opacity",1)}function resetSelection(){vis.selectAll("line").style("stroke-opacity",.1);vis.selectAll("line").style("stroke-width",1.5);vis.selectAll(".node").style("fill-opacity",1)}function showModules(){document.getElementById("modelChart").style.display="block";document.getElementById("geneChart").style.display="none";$("#infoContainer").toggle("slide",200);$("#modelname").html("")}function matchLink(e,t){var n=false;for(var r=0;r<e.length;r++){if(e[r].source.name==t.source.name&&e[r].target.name==t.target.name){n=true;break}}return n}function initSlider(){YUI().use("slider",function(e){function i(t){var n=this.getData(),r=n.slider,i=parseInt(this.get("value"),10);if(n.wait){n.wait.cancel()}n.wait=e.later(200,r,function(){n.wait=null;this.set("value",i)})}function s(e){this.set("value",e.newVal)}var t,n,r;t=e.one("#horiz_value");t.setData("slider",(new e.Slider({axis:"x",min:0,max:1225,value:100,length:"500px",after:{valueChange:e.bind(s,t)}})).render(".horiz_slider")).on("keyup",i)})}function initJQSlider(){$(function(){$("#jqslider").slider({min:0,max:1e3,value:100,slide:function(e,t){$("#horiz_value").val(t.value)}})})}function knobSymbolRedraw(e){initd3();var t=getPlotDataPath()+"?num="+e+";model=symbol;symbol="+selectedSymbolName+";id="+projectId;initGneGraph(t)}function symbolRedraw(){initd3();var e=document.getElementById("horiz_value").value;var t=getPlotDataPath()+"?num="+e+";model=symbol;symbol="+selectedSymbolName+";id="+projectId;initGneGraph(t)}function handleMouseMove(e){e=e||window.event;mousePos={x:e.clientX,y:e.clientY}}function initNodeinfoWindowSize(){var e=0;if(h-500>550)e=550;else e=h-500;$("#nodeinfo").css("height",e+"px");$("#infowin").css("height",e+"px")}function setNodeInfoList(e){var t="";for(var n=0;n<e.length;n++){t=t+"<div class='nitem'>"+"<span class='nname'>"+e[n]+"</span>"+"</div>"}$("#nodeinfo").html(t);$(".nitem").hover(function(){$(this).addClass("nitem_hover")},function(){$(this).removeClass("nitem_hover")})}function setInfoWin(e){var t=path+"getNodeInfoPage"+"?id="+e;$.get(t,function(e){$("#infowin").html("<div id='ibackb'>‹‹</div>"+e);$("#nodeinfo").hide();$("#infowin").toggle("slide",200);$("#ibackb").click(function(){$("#infowin").hide();$("#nodeinfo").show()})})}function initNodeinfoWindowOpenButton(){$("#infoContainerExpandBut").click(function(){$("#infoContainer").toggle("slide",200);$("#infoContainerExpandBut").hide()})}function initNodeinfoWindowCloseButton(){$("#hidebar").click(function(){$("#infoContainer").toggle("slide",200);$("#infoContainerExpandBut").show()})}function getModelEdgeColor(e,t){var n=[[1,.66,-.81,-.44,-.1,.26,-.76,.39,-.56,-.46,-.64,-.63],[.66,1,-.42,-.2,.44,.23,-.78,.81,-.65,-.57,-.96,-.56],[-.81,-.42,1,.0067,.44,-.42,.73,-.08,.3,.65,.46,.32],[-.44,-.2,.0067,1,-.27,.5,.17,-.31,.41,-.4,.058,.59],[-.1,.44,.44,-.27,1,-.11,-.22,.79,-.32,.087,-.31,-.34],[.26,.23,-.42,.5,-.11,1,-.42,.14,-.084,-.62,-.28,.0014],[-.76,-.78,.73,.17,-.22,-.42,1,-.66,.44,.68,.73,.55],[.39,.81,-.08,-.31,.79,.14,-.66,1,-.59,-.35,-.71,-.6],[-.56,-.65,.3,.41,-.32,-.084,.44,-.59,1,.35,.52,.62],[-.46,-.57,.65,-.4,.087,-.62,.68,-.35,.35,1,.67,.16],[-.64,-.96,.46,.058,-.31,-.28,.73,-.71,.52,.67,1,.46],[-.63,-.56,.32,.59,-.34,.0014,.55,-.6,.62,.16,.46,1]];var r={2:0,3:1,4:2,8:3,9:4,11:5,13:6,14:7,15:8,16:9,17:10,18:11};var e=e.replace("M","");var t=t.replace("M","");var i=r[e];var s=r[t];if(n[i][s]>0)return"#F777BB";else return"#0FCCF2"}function getASDColor(e){var t={ARX:"",NCAPD2:"",PTBP1:"",VIM:"",POLQ:"",HMG20B:"",SRBD1:"",TEAD2:"",RFX2:"",ASAP3:"",FCGBP:"",CDC45:"",MCM4:"",H2AFV:"",MPDZ:"",PDLIM1:"",PTK7:"",HDAC1:"",TTF2:"",CNN3:"",PHF19:"",HSDL2:"",SORBS3:"",KIF18A:"",CAT:"",STIL:"",SDF2L1:"",TROAP:"",BRCA2:"",BNIP2:"",CMTM3:"",SLC16A3:"",RNPEPL1:"",IQGAP2:"",MKI67:"",MSI2:"",WASF2:"",TAGLN2:"",FBXO8:"",FABP5:"",ACAA2:"",BMP1:"",DAG1:"",CTDSP2:"",OPLAH:"",PTTG1IP:"",IQGAP3:"",HIST2H2AC:"",TMEM216:"",PLCD1:"",HIST1H1C:"",SVIL:"",ECI2:"",PNP:"",GPR56:"",CLIC1:"",RHBDD2:"",DNAH9:"",CAMK1G:"",ADAM22:"",ROS1:"",PTPRN:"",NPFFR2:"",ERLEC1:"",PTPN3:"",SNCB:"",IPCEF1:"",RIMS1:"",CADPS2:"",TESC:"",RAPGEF4:"",PITPNM3:"",SLC22A17:"",SYNGR1:"",CACNA1F:"",SYP:"",NDRG4:"",NOMO1:"",SYT17:"",CTSH:"",SLC17A7:"",TMEM59L:"",SCN1B:"",DNM1:"",KANK1:"",B9D1:"",CNTNAP1:"",DUSP3:"",GABRA4:"",CDH9:"",GABRG2:"",FHL2:"",EPAS1:"",KIF17:"",B4GALT6:"",CASC1:"",PPL:"",SRGN:"",KCNS1:"",SLC12A5:"",NAPB:"",SULT4A1:"",GFAP:"",ATP6V1E1:"",EFR3A:"",POPDC3:"",XAF1:"",MYH11:"",MICAL2:"",GLS2:"",RAB11FIP5:"",ENPP2:"",HADHB:"",ZNF365:"",STAT4:"",VAMP1:"",C1ORF222:"",SCN1A:"",UNC80:"",IQSEC1:"",C10ORF116:"",ITPR1:"",TDO2:"",TCTEX1D1:"",ADPRHL1:"",THY1:"",GRAMD3:"",NPTN:"",STEAP2:"",CABP1:"",VSNL1:"",ATP1A1:"",SCRG1:"",OXR1:"",GPR146:"",TPP1:"",IDH3A:"",TMEM130:"",SPRYD3:"",BSCL2:"",CPLX1:"",CDK5R2:"",CYP4F11:"",RCAN2:"",THEMIS:"",RAB37:"",C1QTNF1:"",PCSK1:"",RIMS2:"",CTNNA3:"",GRIN2A:"",TSPYL2:"",CEND1:"",METTL7A:"",SV2B:"",KCNIP4:"",MKL2:"",GABRD:"",FHIT:"",TPK1:"",ANXA6:"",SLC6A17:"",OGDHL:"",ST7:"",WDR54:"",CUL3:"",RPL18:"",NFYC:"",GSTP1:"",THOC5:"",ZMAT5:"",RPS19:"",DSE:"",CCNG1:"",SET:"",CPSF3L:"",EIF3G:"",TRAF7:"",NXT1:"",C20ORF111:"",RPS15A:"",RPS6:"",RPLP1:"",LRRC49:"",SEC11A:"",RPS2:"",RPL10:"",EIF4A1:"",DDB1:"",GPS1:"",CHD2:"",RPS27:"",PACS2:"",RPL14:"",NACA:"",SND1:"",ISY1:"",MGST1:"",KAL1:"",TYMP:"",TRAF3IP2:"",IFI35:"",ZC3HAV1:"",IFIH1:"",BST2:"",LGALS3:"",VAV3:"",FAM189A2:"",AGT:"",SP110:"",SLCO1C1:"",ALDH1L1:"",SLC39A12:"",EN2:"",ANGPTL4:"",TAP1:"",RAB31:"",AQP4:"",PARP14:"",IFITM1:"",CYP4F3:"",MT1X:"",MT1M:"","HLA-A":"",IRF9:"",MFRP:"",MTMR7:"",AGK:"",NUDCD3:"",ATP6V0A1:"",MYO16:"",SNAP91:"",NGEF:"",CACNB1:"",ATP2B3:"",LNX1:"",NSF:"",DLG3:"",SMAP2:"",EPB41L1:"",DDX24:"",ACOT7:"",EEF1A2:"",USP11:"",AP3B2:"",RAB2A:"",MTMR9:"",GPI:"",CLIP3:"",SLC1A1:"",FBXW7:"",MADD:"",ENO2:"",CAP2:"",GLS:"",ELOVL4:"",KLC1:"",NDFIP1:"",DLG4:"",SUCLA2:"",SCN2A:"",STXBP1:"",FAM8A1:"",ABI2:"",BBS7:"",UBR3:"",FAM134A:"",ATP6V1B2:"",PAK1:"",DLG2:"",EIF4E:"",RAB6B:"",RAB39B:"",HK1:"",SV2A:"",ATP13A2:"",AP2M1:"",SHANK2:"",CNST:"",BTRC:"",NDEL1:"",SCG5:"",OTUB1:"",LDB2:"",PRKCE:"",CLSTN1:"",C2CD2L:"",SEZ6L2:"",C12ORF68:"",PER1:"",NRXN1:"",ANKRD34A:"",RGS7:"",INPP5J:"",PARK2:"",CYP4X1:"",NKRF:"",ATL1:"",SLC9A6:"",SCAMP5:"",MAGEE1:"",DCTN1:"",PCDHA13:"",PI4KA:"",ABHD14A:"",ICA1:"",CYB561:"",ZMYND11:"",CDH10:"",CAMK2B:"",ST3GAL6:"",PFKP:"",ATP8B1:"",ACHE:"",KIAA0284:"",SGSM3:"",MCF2:"",ZC3H12B:"",FGF9:"",NCALD:"",PIK3CG:"",STX1A:"",EPHB6:"",GLIS3:"",USP46:"",HTATIP2:"",GALNTL4:"",PRMT8:"",SLC29A1:"",FOXP1:"",DNAJC27:"",SLC25A12:"",RAB7L1:"",APOL3:"",UNC13A:"",CALY:"",CYP2E1:"",SESN2:"",SYNE1:"",ACP2:"",DTNA:"",ACRV1:"",HTR1B:"",AGAP2:"",KIAA0513:"",PCDH10:"",RAB15:"",ATP1B1:"",EPHX1:"",ZNF385B:"",CNTN4:"",ANK2:"",NLGN4X:"",SNTG1:"",EBAG9:"",DOC2A:"",CACNA1C:"",NR3C2:"",INPP1:"",PTPRK:"",ABI3BP:"",ABCA5:"",FMN2:"",MAPK13:"",ATP2B2:"",C9ORF91:"",TPRG1L:"",NPM2:"",PPAPDC3:"",PTCHD1:"",SLITRK5:"",LRFN5:"",IGFBP6:"",CHRM1:"",FRMPD4:"",NPAS2:"",ABCG4:"",SNAPC5:"",PELI3:"",BAIAP2:"",LPCAT4:"",SCN4B:"",PGBD5:"",CAMK1D:"",CSMD1:"",FAM174B:"",C11ORF87:"",PION:"",EFCAB6:"",PTPRT:"",GRM7:"",CPNE4:"",ASB13:"",LAMB3:"",GYPE:"",DLGAP2:"",CHSY3:"",ITSN2:"",GPRASP1:"",VAMP2:"",CKMT1B:"",GPR162:"",SLC7A2:"",MPO:"",SLC6A13:"",EHD2:"",ZIC2:"",LAMC3:"",TNFRSF1A:"",TGFBR3:"",CYBRD1:"",MCAM:"",FXYD5:"",LAMB1:"",PLTP:"",MYL12A:"",TIMP1:"",EHD4:"",FCGRT:"",PLEKHA4:"",PCOLCE:"",ECM2:"",SLC6A4:"",CPZ:"",SLC15A3:"",COL12A1:"",TBX18:"",SEMA5A:"",PLSCR4:"",FN1:"",VAMP8:"",RDH10:"",CDKN1A:"",C3:"",RRAS:"",ZFP36:"",PODXL:"",CD68:"",RHBDF2:"",RARRES3:"",EMP1:"",HEY2:"",GNS:"",TMBIM1:"",TLN1:"",LRRC32:"",MYOF:"",IFITM3:"",EMP3:"",MOB3C:"",RBMS3:"",LPP:"",ATP10D:"",ADD3:"",SERPING1:"",ADAM33:"",GJA1:"",MR1:"",DAB2:"",ADAMTS1:"",SLC7A7:"",COLEC12:"",SHC1:"",ITGA5:"",CXCL16:"",DHRS3:"",DDR2:"",DISC1:"",TGFBR2:"",FBN1:"",B2M:"",RAB3IL1:"",SDC2:"",ADORA2B:"",CD14:"",TMEM51:"",LAMB2:"",MMRN2:"",ANO6:"",ZNF366:"",CDH5:"",NQO1:"",FAM89A:"",BGN:"",ANXA2:"",SRPR:"",OAF:"",PROS1:"",IFITM2:"",COL4A1:"",S100A16:"",ADA:"",LRP10:"",S100A10:"",TGM2:"",PSMB8:"",CEBPD:"",MLL5:"",BAZ1B:"",TRIO:"",MLL3:"",ARHGEF10L:"",ZNF638:"",CTTNBP2:"",SRCAP:"",BCORL1:"",ZNF213:"",CNOT3:"",DEPDC5:"",ZMYND8:"",ADNP:"",CORO2A:"",SMC3:"",RAI1:"",SLC38A1:"",KIAA0240:"",CNOT6:"",BIRC6:"",MLL:"",PHF3:"",MED13L:"",MYBBP1A:"",KDM6B:"",ARHGEF11:"",EPHB2:"",KRBA1:"",MEN1:"",UGGT1:"",RTF1:"",MBD1:"",LMTK3:"",POGZ:"",FLG:"",PPRC1:"",CABLES2:"",SETBP1:"",PITPNC1:"",WDR4:"",VPS39:"",KIAA1586:"",CHD3:"",TANC2:"",TSNARE1:"",DLK2:"",JMJD1C:"",CSRP2:"",MLXIP:"",UBE2O:"",ZBTB41:"",GPR139:"",ZNF594:"",SETD2:"",EP400:"",ZNF445:"",MTF1:"",TRRAP:"",PCDHB16:"",SLC25A29:"",ZNF860:"",TOPORS:"",SPTAN1:"",PHF2:"",ZNF311:"",TOP1:"",MBD5:"",TSSK2:"",ZNF585B:"",ITGB3:"",DVL2:"",SLC25A39:"",ARID1B:"",SEC61A1:"",DDX20:"",ANKS1A:"",GNAI3:"",NUP133:"",TCF3:"",IKBKG:"",GTF3C1:"",CAD:"",UIMC1:"",GCN1L1:"",RBM27:"",SUPT16H:"",EIF2C1:"",POLRMT:"",CRKL:"",DGCR14:"",SMCHD1:"",AXIN1:"",TSC2:"",HNRNPUL1:"",PLEKHA8:"",TRDMT1:"",AATF:"",ZNF451:"",CISH:"",MSH6:"",ALMS1:"",APH1A:"",STK11:"",RPN2:"",IRF2BPL:"",DNMT3A:"",BCL11A:"",GNA13:"",ZMYM2:"",XPO5:"",CNOT1:"",KIAA0182:"",CDK4:"",DHX9:"",ACTL6A:"",TBR1:"",FAM129B:"",LRRC1:"",TET1:"",SMARCC2:"",DCAF5:"",USP3:"",XPR1:"",MCL1:"",METTL14:"",PPIP5K2:"",TLK2:"",MCPH1:"",FEZF2:"",AUTS2:"",PPP1R15B:"",KIAA1967:"",NFIA:"",VANGL2:"",GATAD2A:"","AC011498.1":"",C2CD3:"",SF1:"",RFWD3:"",HNRNPF:"",PWWP2A:"",PPM1D:"",TSEN34:"",TNKS:"",SMARCC1:"",RUVBL1:"",SCRIB:"",EHMT1:"",CADM1:"",DCC:"",ZNF292:"",ZKSCAN5:"",ZNF813:"",DLL1:"",DCAF12:"",AP2S1:"",MAP4:"",NCKAP1:"",PKM2:"",SDHA:"",MAPK1:"",C14ORF129:"",DCAF11:"",CD99L2:"",CYB5B:"",STUB1:"",BCL7B:"",SOD2:"",ACTR1B:"",PPP1R7:"",SCP2:"",KLHDC3:"",PIN1:"",DNAJB9:"",GRSF1:"",YARS:"",SLC39A3:"",TAGLN3:"",SAR1B:"",PRDX3:"",FAM91A1:"",AK2:"",LTBP1:"",CSDA:"",NOTCH3:"",TTC38:"",FAT1:"",TRIP6:"",ITGA6:"",TBL1X:"",HSPB1:"",PLOD3:"",RAB34:"",ATP6V0E1:"",MAPKAPK3:"",CHST3:"",SOX9:"",PALLD:"",YAP1:"",TMX1:"",MSN:"",ITGB1:"",TCF7L1:"",PLOD2:"",NECAP2:"",FSTL1:"",ANXA5:"",GPR98:"",CDCA7L:"",SLC4A2:"",IKBIP:"",FAM111A:"",ANTXR1:"",EMX2:"",GNG5:"",YES1:"",OXTR:"",SOX2:"",SPATA13:"",ZFP36L1:"",FLNA:"",SLC2A10:"",GNAS:"",AARSD1:"",GORASP2:"",TM4SF19:"",TRAPPC9:"",PAFAH1B2:"",GAK:"",HEATR8:"",THAP7:"",GPX1:""};if(t.hasOwnProperty(e)){if(selectedColor=="#FF0000")return"#FAC0F2";else return"#FF0000"}else{return selectedColor}}function initAboutB(){$("#aboutB").click(function(){$("#aboutContainer").toggle("slide",{direction:"right"},200)})}function initSearchB(){$("#searchB").click(function(){$("#searchContainer").toggle("slide",{direction:"right"},200);$("#searchtext").focus()});$("#searchtext").keyup(function(e){if(e.keyCode==13){nodeSearch()}})}function nodeSearch(){var e=$("#searchtext").val();var t=null;if($("#modelChart").is(":visible")){t=$("#modelChart")}else{t=$("#geneChart")}d3.selectAll(".node").each(function(t,n){d3.select(this).select("circle").classed("nodeFound",false);var r=d3.select(this).select("text").text();if(r.toLowerCase()==e.toLowerCase()){d3.select(this).select("circle").classed("nodeFound",true)}})}var w=800,h=600;var defaultStrokeWidth=1.5;var path="/gclabapps/nb/";var selectedSymbolName="";var selectedColor="#cccccc";var projectId="0";var sizeDatas={};$(document).ready(function(){initWindowSize();initGraph();initProjectId();initModelGraph();initKnob();initNodeinfoWindowSize();initNodeinfoWindowOpenButton();initNodeinfoWindowCloseButton();initSearchB()});Array.prototype.getUnique=function(){var e={},t=[];for(var n=0,r=this.length;n<r;++n){if(e.hasOwnProperty(this[n])){continue}t.push(this[n]);e[this[n]]=1}return t};var timeout=300;var closetimer=0;var colorIndex=0;var sizeIndex=0;var mousePos;window.onmousemove=handleMouseMove;(function(e){function t(){this._settings=[];this._extensions=[];this.regional=[];this.regional[""]={errorLoadingText:"Error loading",notSupportedText:"This browser does not support SVG"};this.local=this.regional[""];this._uuid=(new Date).getTime();this._renesis=n("RenesisX.RenesisCtrl")}function n(e){try{return!!(window.ActiveXObject&&new ActiveXObject(e))}catch(t){return false}}function i(t,n){this._svg=t;this._container=n;for(var r=0;r<e.svg._extensions.length;r++){var i=e.svg._extensions[r];this[i[0]]=new i[1](this)}}function s(){this._path=""}function o(){this._parts=[]}function u(e){return e&&e.constructor==Array}var r="svgwrapper";e.extend(t.prototype,{markerClassName:"hasSVG",svgNS:"http://www.w3.org/2000/svg",xlinkNS:"http://www.w3.org/1999/xlink",_wrapperClass:i,_attrNames:{class_:"class",in_:"in",alignmentBaseline:"alignment-baseline",baselineShift:"baseline-shift",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorRendering:"color-rendering",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",underlinePosition:"underline-position",underlineThickness:"underline-thickness",vertAdvY:"vert-adv-y",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode"},_attachSVG:function(t,n){var r=t.namespaceURI==this.svgNS?t:null;var t=r?null:t;if(e(t||r).hasClass(this.markerClassName)){return}if(typeof n=="string"){n={loadURL:n}}else if(typeof n=="function"){n={onLoad:n}}e(t||r).addClass(this.markerClassName);try{if(!r){r=document.createElementNS(this.svgNS,"svg");r.setAttribute("version","1.1");if(t.clientWidth>0){r.setAttribute("width",t.clientWidth)}if(t.clientHeight>0){r.setAttribute("height",t.clientHeight)}t.appendChild(r)}this._afterLoad(t,r,n||{})}catch(i){if(e.browser.msie){if(!t.id){t.id="svg"+this._uuid++}this._settings[t.id]=n;t.innerHTML='<embed type="image/svg+xml" width="100%" '+'height="100%" src="'+(n.initPath||"")+'blank.svg" '+'pluginspage="http://www.adobe.com/svg/viewer/install/main.html"/>'}else{t.innerHTML='<p class="svg_error">'+this.local.notSupportedText+"</p>"}}},_registerSVG:function(){for(var t=0;t<document.embeds.length;t++){var n=document.embeds[t].parentNode;if(!e(n).hasClass(e.svg.markerClassName)||e.data(n,r)){continue}var i=null;try{i=document.embeds[t].getSVGDocument()}catch(s){setTimeout(e.svg._registerSVG,250);return}i=i?i.documentElement:null;if(i){e.svg._afterLoad(n,i)}}},_afterLoad:function(t,n,i){var i=i||this._settings[t.id];this._settings[t?t.id:""]=null;var s=new this._wrapperClass(n,t);e.data(t||n,r,s);try{if(i.loadURL){s.load(i.loadURL,i)}if(i.settings){s.configure(i.settings)}if(i.onLoad&&!i.loadURL){i.onLoad.apply(t||n,[s])}}catch(o){alert(o)}},_getSVG:function(t){t=typeof t=="string"?e(t)[0]:t.jquery?t[0]:t;return e.data(t,r)},_destroySVG:function(t){var n=e(t);if(!n.hasClass(this.markerClassName)){return}n.removeClass(this.markerClassName);if(t.namespaceURI!=this.svgNS){n.empty()}e.removeData(t,r)},addExtension:function(e,t){this._extensions.push([e,t])},isSVGElem:function(t){return t.nodeType==1&&t.namespaceURI==e.svg.svgNS}});e.extend(i.prototype,{_width:function(){return this._container?this._container.clientWidth:this._svg.width},_height:function(){return this._container?this._container.clientHeight:this._svg.height},root:function(){return this._svg},configure:function(t,n,r){if(!t.nodeName){r=n;n=t;t=this._svg}if(r){for(var i=t.attributes.length-1;i>=0;i--){var s=t.attributes.item(i);if(!(s.nodeName=="onload"||s.nodeName=="version"||s.nodeName.substring(0,5)=="xmlns")){t.attributes.removeNamedItem(s.nodeName)}}}for(var o in n){t.setAttribute(e.svg._attrNames[o]||o,n[o])}return this},getElementById:function(e){return this._svg.ownerDocument.getElementById(e)},change:function(t,n){if(t){for(var r in n){if(n[r]==null){t.removeAttribute(e.svg._attrNames[r]||r)}else{t.setAttribute(e.svg._attrNames[r]||r,n[r])}}}return this},_args:function(t,n,r){n.splice(0,0,"parent");n.splice(n.length,0,"settings");var i={};var s=0;if(t[0]!=null&&t[0].jquery){t[0]=t[0][0]}if(t[0]!=null&&!(typeof t[0]=="object"&&t[0].nodeName)){i["parent"]=null;s=1}for(var o=0;o<t.length;o++){i[n[o+s]]=t[o]}if(r){e.each(r,function(e,t){if(typeof i[t]=="object"){i.settings=i[t];i[t]=null}})}return i},title:function(e,t,n){var r=this._args(arguments,["text"]);var i=this._makeNode(r.parent,"title",r.settings||{});i.appendChild(this._svg.ownerDocument.createTextNode(r.text));return i},describe:function(e,t,n){var r=this._args(arguments,["text"]);var i=this._makeNode(r.parent,"desc",r.settings||{});i.appendChild(this._svg.ownerDocument.createTextNode(r.text));return i},defs:function(t,n,r){var i=this._args(arguments,["id"],["id"]);return this._makeNode(i.parent,"defs",e.extend(i.id?{id:i.id}:{},i.settings||{}))},symbol:function(t,n,r,i,s,o,u){var a=this._args(arguments,["id","x1","y1","width","height"]);return this._makeNode(a.parent,"symbol",e.extend({id:a.id,viewBox:a.x1+" "+a.y1+" "+a.width+" "+a.height},a.settings||{}))},marker:function(t,n,r,i,s,o,u,a){var f=this._args(arguments,["id","refX","refY","mWidth","mHeight","orient"],["orient"]);return this._makeNode(f.parent,"marker",e.extend({id:f.id,refX:f.refX,refY:f.refY,markerWidth:f.mWidth,markerHeight:f.mHeight,orient:f.orient||"auto"},f.settings||{}))},style:function(t,n,r){var i=this._args(arguments,["styles"]);var s=this._makeNode(i.parent,"style",e.extend({type:"text/css"},i.settings||{}));s.appendChild(this._svg.ownerDocument.createTextNode(i.styles));if(e.browser.opera){e("head").append('<style type="text/css">'+i.styles+"</style>")}return s},script:function(t,n,r,i){var s=this._args(arguments,["script","type"],["type"]);var o=this._makeNode(s.parent,"script",e.extend({type:s.type||"text/javascript"},s.settings||{}));o.appendChild(this._svg.ownerDocument.createTextNode(s.script));if(!e.browser.mozilla){e.globalEval(s.script)}return o},linearGradient:function(t,n,r,i,s,o,u,a){var f=this._args(arguments,["id","stops","x1","y1","x2","y2"],["x1"]);var l=e.extend({id:f.id},f.x1!=null?{x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2}:{});return this._gradient(f.parent,"linearGradient",e.extend(l,f.settings||{}),f.stops)},radialGradient:function(t,n,r,i,s,o,u,a,f){var l=this._args(arguments,["id","stops","cx","cy","r","fx","fy"],["cx"]);var c=e.extend({id:l.id},l.cx!=null?{cx:l.cx,cy:l.cy,r:l.r,fx:l.fx,fy:l.fy}:{});return this._gradient(l.parent,"radialGradient",e.extend(c,l.settings||{}),l.stops)},_gradient:function(t,n,r,i){var s=this._makeNode(t,n,r);for(var o=0;o<i.length;o++){var u=i[o];this._makeNode(s,"stop",e.extend({offset:u[0],stopColor:u[1]},u[2]!=null?{stopOpacity:u[2]}:{}))}return s},pattern:function(t,n,r,i,s,o,u,a,f,l,c){var h=this._args(arguments,["id","x","y","width","height","vx","vy","vwidth","vheight"],["vx"]);var p=e.extend({id:h.id,x:h.x,y:h.y,width:h.width,height:h.height},h.vx!=null?{viewBox:h.vx+" "+h.vy+" "+h.vwidth+" "+h.vheight}:{});return this._makeNode(h.parent,"pattern",e.extend(p,h.settings||{}))},clipPath:function(t,n,r,i){var s=this._args(arguments,["id","units"]);s.units=s.units||"userSpaceOnUse";return this._makeNode(s.parent,"clipPath",e.extend({id:s.id,clipPathUnits:s.units},s.settings||{}))},mask:function(t,n,r,i,s,o,u){var a=this._args(arguments,["id","x","y","width","height"]);return this._makeNode(a.parent,"mask",e.extend({id:a.id,x:a.x,y:a.y,width:a.width,height:a.height},a.settings||{}))},createPath:function(){return new s},createText:function(){return new o},svg:function(t,n,r,i,s,o,u,a,f,l){var c=this._args(arguments,["x","y","width","height","vx","vy","vwidth","vheight"],["vx"]);var h=e.extend({x:c.x,y:c.y,width:c.width,height:c.height},c.vx!=null?{viewBox:c.vx+" "+c.vy+" "+c.vwidth+" "+c.vheight}:{});return this._makeNode(c.parent,"svg",e.extend(h,c.settings||{}))},group:function(t,n,r){var i=this._args(arguments,["id"],["id"]);return this._makeNode(i.parent,"g",e.extend({id:i.id},i.settings||{}))},use:function(t,n,r,i,s,o,u){var a=this._args(arguments,["x","y","width","height","ref"]);if(typeof a.x=="string"){a.ref=a.x;a.settings=a.y;a.x=a.y=a.width=a.height=null}var f=this._makeNode(a.parent,"use",e.extend({x:a.x,y:a.y,width:a.width,height:a.height},a.settings||{}));f.setAttributeNS(e.svg.xlinkNS,"href",a.ref);return f},link:function(t,n,r){var i=this._args(arguments,["ref"]);var s=this._makeNode(i.parent,"a",i.settings);s.setAttributeNS(e.svg.xlinkNS,"href",i.ref);return s},image:function(t,n,r,i,s,o,u){var a=this._args(arguments,["x","y","width","height","ref"]);var f=this._makeNode(a.parent,"image",e.extend({x:a.x,y:a.y,width:a.width,height:a.height},a.settings||{}));f.setAttributeNS(e.svg.xlinkNS,"href",a.ref);return f},path:function(t,n,r){var i=this._args(arguments,["path"]);return this._makeNode(i.parent,"path",e.extend({d:i.path.path?i.path.path():i.path},i.settings||{}))},rect:function(t,n,r,i,s,o,u,a){var f=this._args(arguments,["x","y","width","height","rx","ry"],["rx"]);return this._makeNode(f.parent,"rect",e.extend({x:f.x,y:f.y,width:f.width,height:f.height},f.rx?{rx:f.rx,ry:f.ry}:{},f.settings||{}))},circle:function(t,n,r,i,s){var o=this._args(arguments,["cx","cy","r"]);return this._makeNode(o.parent,"circle",e.extend({cx:o.cx,cy:o.cy,r:o.r},o.settings||{}))},ellipse:function(t,n,r,i,s,o){var u=this._args(arguments,["cx","cy","rx","ry"]);return this._makeNode(u.parent,"ellipse",e.extend({cx:u.cx,cy:u.cy,rx:u.rx,ry:u.ry},u.settings||{}))},line:function(t,n,r,i,s,o){var u=this._args(arguments,["x1","y1","x2","y2"]);return this._makeNode(u.parent,"line",e.extend({x1:u.x1,y1:u.y1,x2:u.x2,y2:u.y2},u.settings||{}))},polyline:function(e,t,n){var r=this._args(arguments,["points"]);return this._poly(r.parent,"polyline",r.points,r.settings)},polygon:function(e,t,n){var r=this._args(arguments,["points"]);return this._poly(r.parent,"polygon",r.points,r.settings)},_poly:function(t,n,r,i){var s="";for(var o=0;o<r.length;o++){s+=r[o].join()+" "}return this._makeNode(t,n,e.extend({points:e.trim(s)},i||{}))},text:function(t,n,r,i,s){var o=this._args(arguments,["x","y","value"]);if(typeof o.x=="string"&&arguments.length<4){o.value=o.x;o.settings=o.y;o.x=o.y=null}return this._text(o.parent,"text",o.value,e.extend({x:o.x&&u(o.x)?o.x.join(" "):o.x,y:o.y&&u(o.y)?o.y.join(" "):o.y},o.settings||{}))},textpath:function(t,n,r,i){var s=this._args(arguments,["path","value"]);var o=this._text(s.parent,"textPath",s.value,s.settings||{});o.setAttributeNS(e.svg.xlinkNS,"href",s.path);return o},_text:function(t,n,r,i){var s=this._makeNode(t,n,i);if(typeof r=="string"){s.appendChild(s.ownerDocument.createTextNode(r))}else{for(var o=0;o<r._parts.length;o++){var u=r._parts[o];if(u[0]=="tspan"){var a=this._makeNode(s,u[0],u[2]);a.appendChild(s.ownerDocument.createTextNode(u[1]));s.appendChild(a)}else if(u[0]=="tref"){var a=this._makeNode(s,u[0],u[2]);a.setAttributeNS(e.svg.xlinkNS,"href",u[1]);s.appendChild(a)}else if(u[0]=="textpath"){var f=e.extend({},u[2]);f.href=null;var a=this._makeNode(s,u[0],f);a.setAttributeNS(e.svg.xlinkNS,"href",u[2].href);a.appendChild(s.ownerDocument.createTextNode(u[1]));s.appendChild(a)}else{s.appendChild(s.ownerDocument.createTextNode(u[1]))}}}return s},other:function(e,t,n){var r=this._args(arguments,["name"]);return this._makeNode(r.parent,r.name,r.settings||{})},_makeNode:function(t,n,r){t=t||this._svg;var i=this._svg.ownerDocument.createElementNS(e.svg.svgNS,n);for(var n in r){var s=r[n];if(s!=null&&s!=null&&(typeof s!="string"||s!="")){i.setAttribute(e.svg._attrNames[n]||n,s)}}t.appendChild(i);return i},add:function(t,n){var r=this._args(arguments.length==1?[null,t]:arguments,["node"]);var i=this;r.parent=r.parent||this._svg;r.node=r.node.jquery?r.node:e(r.node);try{if(e.svg._renesis){throw"Force traversal"}r.parent.appendChild(r.node.cloneNode(true))}catch(s){r.node.each(function(){var e=i._cloneAsSVG(this);if(e){r.parent.appendChild(e)}})}return this},clone:function(t,n){var r=this;var i=this._args(arguments.length==1?[null,t]:arguments,["node"]);i.parent=i.parent||this._svg;i.node=i.node.jquery?i.node:e(i.node);var s=[];i.node.each(function(){var e=r._cloneAsSVG(this);if(e){e.id="";i.parent.appendChild(e);s.push(e)}});return s},_cloneAsSVG:function(t){var n=null;if(t.nodeType==1){n=this._svg.ownerDocument.createElementNS(e.svg.svgNS,this._checkName(t.nodeName));for(var r=0;r<t.attributes.length;r++){var i=t.attributes.item(r);if(i.nodeName!="xmlns"&&i.nodeValue){if(i.prefix=="xlink"){n.setAttributeNS(e.svg.xlinkNS,i.localName||i.baseName,i.nodeValue)}else{n.setAttribute(this._checkName(i.nodeName),i.nodeValue)}}}for(var r=0;r<t.childNodes.length;r++){var s=this._cloneAsSVG(t.childNodes[r]);if(s){n.appendChild(s)}}}else if(t.nodeType==3){if(e.trim(t.nodeValue)){n=this._svg.ownerDocument.createTextNode(t.nodeValue)}}else if(t.nodeType==4){if(e.trim(t.nodeValue)){try{n=this._svg.ownerDocument.createCDATASection(t.nodeValue)}catch(o){n=this._svg.ownerDocument.createTextNode(t.nodeValue.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">"))}}}return n},_checkName:function(e){e=e.substring(0,1)>="A"&&e.substring(0,1)<="Z"?e.toLowerCase():e;return e.substring(0,4)=="svg:"?e.substring(4):e},load:function(t,n){n=typeof n=="boolean"?{addTo:n}:typeof n=="function"?{onLoad:n}:typeof n=="string"?{parent:n}:typeof n=="object"&&n.nodeName?{parent:n}:typeof n=="object"&&n.jquery?{parent:n}:n||{};if(!n.parent&&!n.addTo){this.clear(false)}var r=[this._svg.getAttribute("width"),this._svg.getAttribute("height")];var i=this;var s=function(t){t=e.svg.local.errorLoadingText+": "+t;if(n.onLoad){n.onLoad.apply(i._container||i._svg,[i,t])}else{i.text(null,10,20,t)}};var o=function(e){var t=new ActiveXObject("Microsoft.XMLDOM");t.validateOnParse=false;t.resolveExternals=false;t.async=false;t.loadXML(e);if(t.parseError.errorCode!=0){s(t.parseError.reason);return null}return t};var u=function(t){if(!t){return}if(t.documentElement.nodeName!="svg"){var o=t.getElementsByTagName("parsererror");var u=o.length?o[0].getElementsByTagName("div"):[];s(!o.length?"???":(u.length?u[0]:o[0]).firstChild.nodeValue);return}var a=n.parent?e(n.parent)[0]:i._svg;var f={};for(var l=0;l<t.documentElement.attributes.length;l++){var c=t.documentElement.attributes.item(l);if(!(c.nodeName=="version"||c.nodeName.substring(0,5)=="xmlns")){f[c.nodeName]=c.nodeValue}}i.configure(a,f,!n.parent);var h=t.documentElement.childNodes;for(var l=0;l<h.length;l++){try{if(e.svg._renesis){throw"Force traversal"}a.appendChild(i._svg.ownerDocument.importNode(h[l],true));if(h[l].nodeName=="script"){e.globalEval(h[l].textContent)}}catch(p){i.add(a,h[l])}}if(!n.changeSize){i.configure(a,{width:r[0],height:r[1]})}if(n.onLoad){n.onLoad.apply(i._container||i._svg,[i])}};if(t.match("<svg")){u(e.browser.msie?o(t):(new DOMParser).parseFromString(t,"text/xml"))}else{e.ajax({url:t,dataType:e.browser.msie?"text":"xml",success:function(t){u(e.browser.msie?o(t):t)},error:function(e,t,n){s(t+(n?" "+n.message:""))}})}return this},remove:function(e){e=e.jquery?e[0]:e;e.parentNode.removeChild(e);return this},clear:function(e){if(e){this.configure({},true)}while(this._svg.firstChild){this._svg.removeChild(this._svg.firstChild)}return this},toSVG:function(e){e=e||this._svg;return typeof XMLSerializer=="undefined"?this._toSVG(e):(new XMLSerializer).serializeToString(e)},_toSVG:function(t){var n="";if(!t){return n}if(t.nodeType==3){n=t.nodeValue}else if(t.nodeType==4){n="<![CDATA["+t.nodeValue+"]]>"}else{n="<"+t.nodeName;if(t.attributes){for(var r=0;r<t.attributes.length;r++){var i=t.attributes.item(r);if(!(e.trim(i.nodeValue)==""||i.nodeValue.match(/^\[object/)||i.nodeValue.match(/^function/))){n+=" "+(i.namespaceURI==e.svg.xlinkNS?"xlink:":"")+i.nodeName+'="'+i.nodeValue+'"'}}}if(t.firstChild){n+=">";var s=t.firstChild;while(s){n+=this._toSVG(s);s=s.nextSibling}n+="</"+t.nodeName+">"}else{n+="/>"}}return n}});e.extend(s.prototype,{reset:function(){this._path="";return this},move:function(e,t,n){n=u(e)?t:n;return this._coords(n?"m":"M",e,t)},line:function(e,t,n){n=u(e)?t:n;return this._coords(n?"l":"L",e,t)},horiz:function(e,t){this._path+=(t?"h":"H")+(u(e)?e.join(" "):e);return this},vert:function(e,t){this._path+=(t?"v":"V")+(u(e)?e.join(" "):e);return this},curveC:function(e,t,n,r,i,s,o){o=u(e)?t:o;return this._coords(o?"c":"C",e,t,n,r,i,s)},smoothC:function(e,t,n,r,i){i=u(e)?t:i;return this._coords(i?"s":"S",e,t,n,r)},curveQ:function(e,t,n,r,i){i=u(e)?t:i;return this._coords(i?"q":"Q",e,t,n,r)},smoothQ:function(e,t,n){n=u(e)?t:n;return this._coords(n?"t":"T",e,t)},_coords:function(e,t,n,r,i,s,o){if(u(t)){for(var a=0;a<t.length;a++){var f=t[a];this._path+=(a==0?e:" ")+f[0]+","+f[1]+(f.length<4?"":" "+f[2]+","+f[3]+(f.length<6?"":" "+f[4]+","+f[5]))}}else{this._path+=e+t+","+n+(r==null?"":" "+r+","+i+(s==null?"":" "+s+","+o))}return this},arc:function(e,t,n,r,i,s,o,a){a=u(e)?t:a;this._path+=a?"a":"A";if(u(e)){for(var f=0;f<e.length;f++){var l=e[f];this._path+=(f==0?"":" ")+l[0]+","+l[1]+" "+l[2]+" "+(l[3]?"1":"0")+","+(l[4]?"1":"0")+" "+l[5]+","+l[6]}}else{this._path+=e+","+t+" "+n+" "+(r?"1":"0")+","+(i?"1":"0")+" "+s+","+o}return this},close:function(){this._path+="z";return this},path:function(){return this._path}});s.prototype.moveTo=s.prototype.move;s.prototype.lineTo=s.prototype.line;s.prototype.horizTo=s.prototype.horiz;s.prototype.vertTo=s.prototype.vert;s.prototype.curveCTo=s.prototype.curveC;s.prototype.smoothCTo=s.prototype.smoothC;s.prototype.curveQTo=s.prototype.curveQ;s.prototype.smoothQTo=s.prototype.smoothQ;s.prototype.arcTo=s.prototype.arc;e.extend(o.prototype,{reset:function(){this._parts=[];return this},string:function(e){this._parts[this._parts.length]=["text",e];return this},span:function(e,t){this._parts[this._parts.length]=["tspan",e,t];return this},ref:function(e,t){this._parts[this._parts.length]=["tref",e,t];return this},path:function(t,n,r){this._parts[this._parts.length]=["textpath",n,e.extend({href:t},r||{})];return this}});e.fn.svg=function(t){var n=Array.prototype.slice.call(arguments,1);if(typeof t=="string"&&t=="get"){return e.svg["_"+t+"SVG"].apply(e.svg,[this[0]].concat(n))}return this.each(function(){if(typeof t=="string"){e.svg["_"+t+"SVG"].apply(e.svg,[this].concat(n))}else{e.svg._attachSVG(this,t||{})}})};e.svg=new t})(jQuery);(function(e){function t(t){for(var n=0;n<t.length;n++){if(t[n].nodeType==1&&t[n].namespaceURI==e.svg.svgNS){return true}}return false}e.fn.addClass=function(t){return function(n){n=n||"";return this.each(function(){if(e.svg.isSVGElem(this)){var r=this;e.each(n.split(/\s+/),function(t,n){var i=r.className?r.className.baseVal:r.getAttribute("class");if(e.inArray(n,i.split(/\s+/))==-1){i+=(i?" ":"")+n;r.className?r.className.baseVal=i:r.setAttribute("class",i)}})}else{t.apply(e(this),[n])}})}}(e.fn.addClass);e.fn.removeClass=function(t){return function(n){n=n||"";return this.each(function(){if(e.svg.isSVGElem(this)){var r=this;e.each(n.split(/\s+/),function(t,n){var i=r.className?r.className.baseVal:r.getAttribute("class");i=e.grep(i.split(/\s+/),function(e,t){return e!=n}).join(" ");r.className?r.className.baseVal=i:r.setAttribute("class",i)})}else{t.apply(e(this),[n])}})}}(e.fn.removeClass);e.fn.toggleClass=function(t){return function(n,r){return this.each(function(){if(e.svg.isSVGElem(this)){if(typeof r!=="boolean"){r=!e(this).hasClass(n)}e(this)[(r?"add":"remove")+"Class"](n)}else{t.apply(e(this),[n,r])}})}}(e.fn.toggleClass);e.fn.hasClass=function(t){return function(n){n=n||"";var r=false;this.each(function(){if(e.svg.isSVGElem(this)){var i=(this.className?this.className.baseVal:this.getAttribute("class")).split(/\s+/);r=e.inArray(n,i)>-1}else{r=t.apply(e(this),[n])}return!r});return r}}(e.fn.hasClass);e.fn.attr=function(t){return function(n,r,i){if(typeof n==="string"&&r===undefined){var s=t.apply(this,[n]);if(s&&s.baseVal&&s.baseVal.numberOfItems!=null){r="";s=s.baseVal;if(n=="transform"){for(var o=0;o<s.numberOfItems;o++){var u=s.getItem(o);switch(u.type){case 1:r+=" matrix("+u.matrix.a+","+u.matrix.b+","+u.matrix.c+","+u.matrix.d+","+u.matrix.e+","+u.matrix.f+")";break;case 2:r+=" translate("+u.matrix.e+","+u.matrix.f+")";break;case 3:r+=" scale("+u.matrix.a+","+u.matrix.d+")";break;case 4:r+=" rotate("+u.angle+")";break;case 5:r+=" skewX("+u.angle+")";break;case 6:r+=" skewY("+u.angle+")";break}}s=r.substring(1)}else{s=s.getItem(0).valueAsString}}return s&&s.baseVal?s.baseVal.valueAsString:s}var a=n;if(typeof n==="string"){a={};a[n]=r}return this.each(function(){if(e.svg.isSVGElem(this)){for(var s in a){var o=e.isFunction(a[s])?a[s]():a[s];i?this.style[s]=o:this.setAttribute(s,o)}}else{t.apply(e(this),[n,r,i])}})}}(e.fn.attr);e.fn.removeAttr=function(t){return function(n){return this.each(function(){if(e.svg.isSVGElem(this)){this[n]&&this[n].baseVal?this[n].baseVal.value="":this.setAttribute(n,"")}else{t.apply(e(this),[n])}})}}(e.fn.removeAttr);e.extend(e.cssNumber,{stopOpacity:true,strokeMitrelimit:true,strokeOpacity:true});if(e.cssProps){e.css=function(t){return function(n,r,i){var s=r.match(/^svg.*/)?e(n).attr(e.cssProps[r]||r):"";return s||t(n,r,i)}}(e.css)}e.expr.relative["+"]=function(e){return function(n,r,i){e(n,r,i||t(n))}}(e.expr.relative["+"]);e.expr.relative[">"]=function(e){return function(n,r,i){e(n,r,i||t(n))}}(e.expr.relative[">"]);e.expr.relative[""]=function(e){return function(n,r,i){e(n,r,i||t(n))}}(e.expr.relative[""]);e.expr.relative["~"]=function(e){return function(n,r,i){e(n,r,i||t(n))}}(e.expr.relative["~"]);e.expr.find.ID=function(t){return function(n,r,i){return e.svg.isSVGElem(r)?[r.ownerDocument.getElementById(n[1])]:t(n,r,i)}}(e.expr.find.ID);var n=document.createElement("div");n.appendChild(document.createComment(""));if(n.getElementsByTagName("*").length>0){e.expr.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if(e[1]==="*"){var r=[];for(var i=0;n[i]||n.item(i);i++){if((n[i]||n.item(i)).nodeType===1){r.push(n[i]||n.item(i))}}n=r}return n}}e.expr.preFilter.CLASS=function(t,n,r,i,s,o){t=" "+t[1].replace(/\\/g,"")+" ";if(o){return t}for(var u=0,a={};a!=null;u++){a=n[u];if(!a){try{a=n.item(u)}catch(f){}}if(a){var l=!e.svg.isSVGElem(a)?a.className:(a.className?a.className.baseVal:"")||a.getAttribute("class");if(s^(l&&(" "+l+" ").indexOf(t)>-1)){if(!r)i.push(a)}else if(r){n[u]=false}}}return false};e.expr.filter.CLASS=function(t,n){var r=!e.svg.isSVGElem(t)?t.className:t.className?t.className.baseVal:t.getAttribute("class");return(" "+r+" ").indexOf(n)>-1};e.expr.filter.ATTR=function(t){return function(n,r){var i=null;if(e.svg.isSVGElem(n)){i=r[1];e.expr.attrHandle[i]=function(e){var t=e.getAttribute(i);return t&&t.baseVal||t}}var s=t(n,r);if(i){e.expr.attrHandle[i]=null}return s}}(e.expr.filter.ATTR)})(jQuery)

